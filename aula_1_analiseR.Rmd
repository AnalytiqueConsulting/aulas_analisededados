---
title: Análise de Dados em R
author: Cláudio A. Monteiro
date: 23 de Janeiro, 2018
output:
  prettydoc::html_pretty:
    theme: cayman
    highlight: github
---

```{r knitr_init, include=FALSE}
library(knitr); library(rmdformats)

## Global options
options(max.print="75")
opts_chunk$set(echo=TRUE,
	             cache=TRUE,
               prompt=FALSE,
               tidy=TRUE,
               comment=NA,
               message=FALSE,
               warning=FALSE)
opts_knit$set(width=75)
```

## **PRÁTICA EM R**

### Agora vamos pôr a mão na massa!

A partir de agora iremos começar a trabalhar diretamente com a linguagem R, compreendendo seus conceitos e operações mais básicas.

**Atenção!** Abra um *Script* e salve-o com o nome que desejar, numa pasta específica para seus estudos em R. É muito importante que você acompanhe o texto com o RStudio aberto, inserindo e executando os códigos no Script. Para tal você deve estar com a barra “|” piscando na mesma linha do código que quer executar, então aperte *Ctrl + Enter (Windows/Linux)* ou *Command + Enter (MAC)*.

Neste projeto encontram-se as bases de dados e códigos computacionais utilizados numa apresentação feita pelo Observatório de Saneamento e Meio Ambiente do Recife (OSAR) sobre os dados de saneamento em Belo Jardim, município do Agreste pernambucano, no evento **Digitologias**. Todo o trabalho foi feito em [linguagem R](https://openastrolabium.wordpress.com/2017/05/24/introducao-ao-r/). As bases de dados originais, assim como os códigos para gerareste documento se encontram em [nosso repositório](https://github.com/observatoriosar).


| **Indicador**                                                    | **Código no SNIS**           |
| ---------------------------------------------------------------- |:---------------------------: |
| População total atendida com abastecimento de água (Habitantes)  | AG001                        |
| Consumo médio per capta de água (l/hab./dia)                     | IN022                        |
| Índice de Coleta de esgoto                                       | IN056                        |
| Índice de tratamento de esgoto (percentual)                      | IN016                        |
| Volume de esgotos coletado (1.000 m³/ano)                        | ES005                        |

A funcionalidade mais básica do R é atuar como uma calculadora. Podemos fazer alguns cálculos básicos como:


```{r }
3 + 5               # soma
183082 - 21982      # subtração
92 * 1.6            # multiplicação
900 / 30            # divisão
40**2               # exponencial
```

</br>

## **Função**

Uma *função* é um *comando* que irá executar uma série de tarefas que lhe foi designada. Tudo o que *acontece* no R é uma função. A função sqrt() , por exemplo, nos retorna a raiz quadrada do que estiver entre parênteses:

```{r}
sqrt(9)
```

</br>

Atenção! Toda função no R precisa ter uma documentação específica de como ela é estruturada e o que cada argumento[^1] da função significa. Para solicitar esse documento basta executar o seguinte comando[3]:

[^1] Os argumentos de uma função são as informações que ela necessita para ser executada, algumas funções tomam certos argumentos como padrão e outros é necessário que seja informado algo. Por exemplo, a função plot() necessita do argumento x (dados no eixo das abscissas) e y (dados no eixo das ordenadas) para ser executada.

O R também trabalha com operações lógicas,  retornando TRUE ou FALSE a partir da lógica que testamos.

```{r}

2 == 3       # 2 igual a 3
2 != 3       # 2 diferente de 3
2 < 3        # 2 menor do que 3
2 <= 3       # 2 menor ou igual a 3
2 > 3        # 2 maior do que 3
2 >= 3       # 2 maior ou igual a 3

```

</br>

### **Objeto**

Um conceito fundamental para entendermos o funcionamento da linguagem R é o de programação orientada a objetos[5].

Objetos do mundo real têm duas características: todos tem *estado* e *comportamento*. Gatos possuem estado (nome, cor, cheiro, fome) e comportamento (miar, pular, ronronar). Identificar o estado e comportamento de objetos do mundo real é uma ótima maneira de começar a pensar em termos de programação orientada a objetos.

Pare um pouco agora e olhe ao seu redor, observa os objetos que estão ao seu redor. Para cada objeto que você vê, pergunte a si mesmo: “Em quais possíveis estados que este objeto pode estar?” e “quais possíveis comportamentos este objeto pode ter?”. Anote suas observações em um papel.

 Você deve notar que objetos do mundo real variam em complexidade, a lâmpada do seu quarto tem dois possíveis estados (ligada e desligada) e dois possíveis comportamentos (ligar, desligar), mas seu ventilador, por exemplo, pode ter uma maior variabilidade de estados (ligado, velocidade atual, desligado, posicionado para cima, posicionado para baixo) e comportamentos (aumentar velocidade, diminuir velocidade, desligar , girar, parar). Você também pode notar que alguns objetos estão dentro de outros objetos (uma caneta dentro de um estojo, um café dentro de um copo). Todas essas observações do mundo real são traduzidas para o mundo da programação orientada a objetos.

Objetos computacionais são conceitualmente similares a objetos do mundo real: eles também possuem estado e comportamento. Um objeto armazena seu estado em **classes** (varia de acordo com a linguagem de programação) e expõe seu comportamento por meio de **funções**.

No R, tudo aquilo que **existe** é um objeto. Os objetos salvos aparecem no Environment, localizado no canto direito superior da tela do *RStudio*.

#### Para ilustrar isso, vamos criar objetos! 

```{r}

# '<' e  '-'  , juntos : '<-'

#X

X <- 20

X
```


**Atenção!** Podemos ver nos códigos que os comentários estão precedidos de cerquilha (#). Tudo o que estiver do seu lado direito será lido pelo R como um comentário e não será executado. É muito comum que em trabalhos que vão ganhando complexidade nos esqueçamos do que cada código está fazendo. Por isso devemos inserir comentários detalhados ao longo de todos os códigos que digitamos pois eles servirão para nos orientar posteriormente quando quisermos voltar ao que executamos.

**Atenção!** Devemos nos atentar para criar objetos que sejam concisos em seu nome, identificando bem o que eles representam. Evita-se também o uso de acentos, tantos nos códigos como em comentários.

**Atenção!** Com o RStudio aberto será possível ver no Environment todos os objetos que estamos criando, como x e obj_1.


</br>


### Tipos de objetos no R

Os objetos no R podem armazenar diferentes tipos de informação. As características dessas informações e como elas estão organizadas definirão a classe do objeto que as armazena.

A função c() combina os valores que estão entre parênteses. Ela se faz necessária na criação de um objeto com mais de uma dimensão. Vale salientar que, no R, as informações são separadas por ',' (vírgula) e a decimal por '.' (ponto). 


#### Logical (lógico)
```{r}
x1 <- c(TRUE, FALSE)   # combina os valores TRUE e FALSE e atribui a x1
x1
class(x1)

```

#### Integer (quantitativa discreta)
```{r}

x2 <- 9:29             # combina os números inteiros de 9 a 29 e atribui a x2 
x2
class(x2)

```


#### Character (qualitativa nominal)
```{r}
nome <- c("1", "2", "3") # insira o seu nome, o do seu pai e sua mae
nome
class(nome)

```
**Atenção!** Como podemos observar, para criar objetos do tipo character, devemos colocar as informações entre aspas.

#### Numeric (quantitativa contínua)
```{r}
altura <- c( 1, 2, 3) # insira sua altura e a dos seus pais (se nao souber, invente)
altura
class(altura)

```

#### Data Frame (banco de dados)
```{r}
dados_altura <- data.frame(nome, altura)
dados_altura
class(dados_altura)

```












